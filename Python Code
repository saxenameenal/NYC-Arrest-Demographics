import plotly.graph_objects as go
from plotly.offline import iplot
from IPython.display import display
from ipywidgets import *

import pandas as pd

mapbox_access_token = 'pk.eyJ1IjoiZ2hjYXJuZWlybyIsImEiOiJjazBmOXNjNmswcWcyM2JxZXhjNzc2eDBkIn0.L4pHZaHSpa4pQL-fML9i5w'

df = pd.read_csv('file://localhost/C:/Users...')

#reading in different columns, and converting to string to be able to graph
df['Date'] = df.date.astype(str) 
df['Borough'] = df.Borough.astype(str)
df['Offense'] = df.Offense_Type.astype(str)
df['Offense Description'] = df.Offense_Description.astype(str)
df['AgeGroup'] = df.p.astype(str)
df['Gender']=df.s.astype(str)

site_lat = df.latitude #taking latitude to plot on map
site_lon = df.longitude #taking longitude

#plotting data on map
dataAll = [
    go.Scattermapbox(
        #where you plot the dots on map
        lat=site_lat,
        lon=site_lon,
        mode='markers',
        marker=dict(
            size=0.5,
            color='rgb(255, 215, 0)',
            opacity=0.7
        ),

        text="Date: " + df['Date'] + "<br />" + "Borough:  "+ df['Borough'] + "<br />" + "Offense Type: " + df['Offense'] + "<br />"  + "Offense Description: " + df['Offense Description'] ,
        hoverinfo='text',
        name="casualties"
    )]

layoutAll = go.Layout(
    title='NYC Arrests',
    autosize=True,
    hovermode='closest',
    showlegend=True,
    mapbox=dict(
        accesstoken=mapbox_access_token,
        bearing=0,
        center=dict(
            lat=40,
            lon=-73.0060
        ),
        pitch=0,
        zoom=3,
        style='dark'
    ),
)

figAll = dict(data=dataAll, layout=layoutAll)


df = pd.read_csv('file://localhost/C:/Users...')

#reading in different columns, and converting to string to be able to graph
df['Date'] = df.date.astype(str) 
df['Borough'] = df.Borough.astype(str)
df['Offense'] = df.Offense_Type.astype(str)
df['Offense Description'] = df.Offense_Description.astype(str)
df['AgeGroup'] = df.p.astype(str)
df['Gender']=df.s.astype(str)

site_lat = df.latitude #taking latitude to plot on map
site_lon = df.longitude #taking longitude

#plotting data on map
data2017 = [
    go.Scattermapbox(
        #where you plot the dots on map
        lat=site_lat,
        lon=site_lon,
        mode='markers',
        marker=dict(
            size=0.5,
            color='rgb(255, 215, 0)',
            opacity=0.7
        ),


        text="Date: " + df['Date'] + "<br />" + "Borough:  "+ df['Borough'] + "<br />" + "Offense Type: " + df['Offense'] + "<br />"  + "Offense Description: " + df['Offense Description'] ,
        hoverinfo='text',
        name="casualties"
    )]


layout2017 = go.Layout(
    title='NYC Arrests in 2017',
    autosize=True,
    hovermode='closest',
    showlegend=True,
    mapbox=dict(
        accesstoken=mapbox_access_token,
        bearing=0,
        center=dict(
            lat=40,
            lon=-73.0060
        ),
        pitch=0,
        zoom=3,
        style='dark'
    ),
)

fig2017 = dict(data=data2017, layout=layout2017)


import plotly.graph_objects as go
from plotly.offline import iplot
from IPython.display import display
from ipywidgets import *

import pandas as pd

mapbox_access_token = 'pk.eyJ1IjoiZ2hjYXJuZWlybyIsImEiOiJjazBmOXNjNmswcWcyM2JxZXhjNzc2eDBkIn0.L4pHZaHSpa4pQL-fML9i5w'

df = pd.read_csv('file://localhost/C:/Users...')

#reading in different columns, and converting to string to be able to graph
df['Date'] = df.date.astype(str) 
df['Borough'] = df.Borough.astype(str)
df['Offense'] = df.Offense_Type.astype(str)
df['Offense Description'] = df.Offense_Description.astype(str)
df['AgeGroup'] = df.p.astype(str)
df['Gender']=df.s.astype(str)

site_lat = df.latitude #taking latitude to plot on map
site_lon = df.longitude #taking longitude

#plotting data on map
data2016 = [
    go.Scattermapbox(
        #where you plot the dots on map
        lat=site_lat,
        lon=site_lon,
        mode='markers',
        marker=dict(
            size=0.5,
            color='rgb(255, 215, 0)',
            opacity=0.7
        ),

        text="Date: " + df['Date'] + "<br />" + "Borough:  "+ df['Borough'] + "<br />" + "Offense Type: " + df['Offense'] + "<br />"  + "Offense Description: " + df['Offense Description'] ,
        hoverinfo='text',
        name="casualties"
    )]

layout2016 = go.Layout(
    title='NYC Arrests in 2016',
    autosize=True,
    hovermode='closest',
    showlegend=True,
    mapbox=dict(
        accesstoken=mapbox_access_token,
        bearing=0,
        center=dict(
            lat=40,
            lon=-73.0060
        ),
        pitch=0,
        zoom=3,
        style='dark'
    ),
) 

fig2016 = dict(data=data2016, layout=layout2016)

df = pd.read_csv('file://localhost/C:/Users...')

#reading in different columns, and converting to string to be able to graph
df['Date'] = df.date.astype(str) 
df['Borough'] = df.Borough.astype(str)
df['Offense'] = df.Offense_Type.astype(str)
df['Offense Description'] = df.Offense_Description.astype(str)
df['AgeGroup'] = df.p.astype(str)
df['Gender']=df.s.astype(str)

site_lat = df.latitude #taking latitude to plot on map
site_lon = df.longitude #taking longitude

#plotting data on map
data2015 = [
    go.Scattermapbox(
        #where you plot the dots on map
        lat=site_lat,
        lon=site_lon,
        mode='markers',
        marker=dict(
            size=0.5,
            color='rgb(255, 215, 0)',
            opacity=0.7
        ),


        text="Date: " + df['Date'] + "<br />" 
            + "Borough:  "+ df['Borough'] + "<br />" 
            + "Offense Type: " + df['Offense'] + "<br />"  
            + "Offense Description: " + df['Offense Description'] ,
        hoverinfo='text',
        name="arrests"
    )]


layout2015 = go.Layout(
    title='NYC Arrests in 2015',
    autosize=True,
    hovermode='closest',
    showlegend=True,
    mapbox=dict(
        accesstoken=mapbox_access_token,
        bearing=0,
        center=dict(
            lat=40,
            lon=-73.0060
        ),
        pitch=0,
        zoom=3,
        style='dark'
    ),
)

fig2015 = dict(data=data2015, layout=layout2015)

import ipywidgets as wg
from IPython.display import display
name=wg.Text(value='Year')
display(name)

from IPython.display import display
from ipywidgets import *
a=1;
button1 = widgets.Button(description="NYC Arrests")
button2 = widgets.Button(description="NYC Arrests 2015")
button3 = widgets.Button(description="NYC Arrests 2016")
button4 = widgets.Button(description="NYC Arrests 2017")

display(button1)
display(button2)
display(button3)
display(button4)

def on_button1_clicked(a):
    iplot(figAll, filename='NYC Arrests')
def on_button2_clicked(a):
    iplot(fig2016, filename='NYC Arrests 2015')
def on_button3_clicked(a):
    iplot(fig2016, filename='NYC Arrests 2016')
def on_button4_clicked(a):
    iplot(fig2016, filename='NYC Arrests 2017')

button1.on_click(on_button1_clicked)
button2.on_click(on_button2_clicked)
button3.on_click(on_button3_clicked)
button4.on_click(on_button4_clicked)
